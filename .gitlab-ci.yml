image: ultravideo/uvgvpccenc-ci-base

# Build and test uvgVPCCenc
test-uvgvpcc: &test-template
  stage: test
  script:
    - export PATH="${HOME}/bin:${PATH}"
    - cmake --preset=CI
    - cmake --build --preset=CI
    - ctest --preset=CI-ci-long-default
  artifacts:
    paths:
    - _build/CI/src/app/uvgVPCCenc
    - _build/CI/Testing/Temporary/CTestCostData.txt
    - _build/CI/Testing/Temporary/LastTest.log
    - _build/CI/bitstream/long_default_ReadyForWinter_vox9_AI_16-22-2_fast_true_2t_1l_1n.vpcc
    - _build/CI/bitstream/long_default_ReadyForWinter_vox9_RA_32-42-4_slow_true_2t_1l_1n.vpcc
    expire_in: 1 week
